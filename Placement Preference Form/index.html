<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="widthdevice-width, initial-scale=1">
    <link rel="icon" href="white_logo.png" type="image/x-icon">
    <title>Preference Form</title>  
    <link rel="stylesheet" href="style.css" />
    <script>
      window.onload=getstatus();
       function getstatus(){
   const url = "https://script.google.com/macros/s/AKfycbxR9JjLW-_xKlNmW7-2OmoqYeHLkfZn45DJL-kazZ4Nl_gGqbUNwJk96DmvpyGzxAPp/exec" 
   var val = "Placement Preference Form";
   console.log(val)
   fetch(`${url}?header=${val}`)
       .then((response) => response.json())
       .then(({ data }) => {
           if (data == "Live"){
   
               document.getElementById("frqa").style.display="initial";
               document.getElementById("ll").textContent="";
   
               }
               else if (data == "Inactive"){
                 document.getElementById("frqa").style.display="none";
                 window.location='end.html';
               }
       })
       .catch((error) => console.error('!!!!!!!!', error));
   }
   </script>
</head>    
<body>
<section class="header">
<div>
<img src="white_logo.png" alt="">
</div>
<div>
<h1>NIFTEM-T Placement Cell</h1>
</div>
</section>
<section >
<div class="form-container">
<script type="text/javascript">var submitted=false </script>
<iframe name="hiddenConfirm" id="hiddenConfirm" style="display: none;" onload="if(submitted){
    window.location='submission.html'; }"></iframe>
    <form id="form" class="container m-4 pl-4" method="POST">
<h1 style="text-align: center;"> Placement Preference Form </h1>
<h3 id="ll" style="text-align: center;">Form Loading....</h3>
<div id="frqa" class="frqa">
<div class="form-element">
<span class="q">Name</span>
<select name="Name" id="Name" required placeholder="Select your name">
<option value="">Select your name</option>
<option value="Aditya Narayan Bharadwaj ">Aditya Narayan Bharadwaj </option>
<option value="Ambi Karthikeya">Ambi Karthikeya</option>
<option value="Arun M K">Arun M K</option>
<option value="Ashika.R ">Ashika.R </option>
<option value="Baddela Pranav Teja ">Baddela Pranav Teja </option>
<option value="Bolla Sushma ">Bolla Sushma </option>
<option value="C Varun kumar reddy ">C Varun kumar reddy </option>
<option value="Deepashree S ">Deepashree S </option>
<option value="Ganesan B K">Ganesan B K</option>
<option value="Gopika R">Gopika R</option>
<option value="Gopikrishnan.A">Gopikrishnan.A</option>
<option value="Gujjaralapudi Phani">Gujjaralapudi Phani</option>
<option value="Hemprasath B ">Hemprasath B </option>
<option value="Hiruthick Sriram A S ">Hiruthick Sriram A S </option>
<option value="Jayasri S">Jayasri S</option>
<option value="Kameshwari Y">Kameshwari Y</option>
<option value="Kishoreprakash O">Kishoreprakash O</option>
<option value="Kolli Raja Aravind">Kolli Raja Aravind</option>
<option value="Kovarthan P">Kovarthan P</option>
<option value="Madhumitha M">Madhumitha M</option>
<option value="Makalakshmi V">Makalakshmi V</option>
<option value="Manojkumar B">Manojkumar B</option>
<option value="Neethi Sri S">Neethi Sri S</option>
<option value="Patibandla Lakshmi Narayana ">Patibandla Lakshmi Narayana </option>
<option value="R Pavithra">R Pavithra</option>
<option value="Pragadeesh G">Pragadeesh G</option>
<option value="Prerana C Madane">Prerana C Madane</option>
<option value="P.Ragavan">P.Ragavan</option>
<option value="Ramavath chandrasekar naik ">Ramavath chandrasekar naik </option>
<option value="Santhamoorthy A">Santhamoorthy A</option>
<option value="Sathya Narayana K">Sathya Narayana K</option>
<option value="Shaik Abdul Sattar">Shaik Abdul Sattar</option>
<option value="Shanmughapriyan T">Shanmughapriyan T</option>
<option value="Shrina Xame M ">Shrina Xame M </option>
<option value="Shubham Sharma">Shubham Sharma</option>
<option value="Sudarsanam H M ">Sudarsanam H M </option>
<option value="D Swathi">D Swathi</option>
<option value="Swatika S K">Swatika S K</option>
<option value="Thendral J">Thendral J</option>
<option value="Ujjwal Kumar">Ujjwal Kumar</option>
<option value="Vijay Verma ">Vijay Verma </option>
<option value="Yeturi Jeshwanth Reddy">Yeturi Jeshwanth Reddy</option>
</select>

</div>
<div class="form-element">
<span class="q">ID Number</span>
<input type="text" name="ID Number" required placeholder="Enter your ID number"/>
</div>
<div class="form-element">
<span class="q">Email address</span>
<input type="email" name="Email address"  required placeholder="Enter your email"/>
</div>
<div class="form-element radio-buttons">
<span class="q">What is your future preference?</span>
<label for="Placement through Placement Cell">

<input
type="radio"
name="What is your future preference?"
required 
id="Placement through Placement Cell"
value="Placement through Placement Cell"
/>
<span>Placement through Placement Cell</span>
</label>
<label for="Higher Studies">

<input
type="radio"
name="What is your future preference?"
id="Higher Studies"
value="Higher Studies"
/>
<span>Higher Studies</ span>
</label>
<label for="Entrepreneurship">

<input
type="radio"
name="What is your future preference?"
id="Entrepreneurship"
value="Entrepreneurship"
/>
<span>Entrepreneurship</ span>
</label>
<label for="By Own">

<input
type="radio"
name="What is your future preference?"
id="By Own"
value="By Own"
/>
<span>By yourself</ span>
</label>
</div>
<div style="font-size: 14px;">
<span>*This response will be considered as the final option. Kindly choose wisely.</span><br>
<span >Everyone must abide to the guidelines, rules and regulations mentioned in the acknowledgement form given by the Placement Cell and has to be signed, in order to proceed for internship or placement through NIFTEM-T Placement Cell.</span>
</div>
<button style="margin-top: 20px;" type="submit" id="bt"> 
Submit
</button> 
<div
      id="message"
    
      ></div>
<div id="load" class="loader"> 
<img style="scale: 1.5;" src="loader.gif" alt="">
    </div> 
  </div> 
</div>
<script>
let form = document.querySelector("form");
form.addEventListener('submit',()=>{ {
  document.getElementById("load").style.display="flex";
  document.getElementById("bt").style.display="none";
}})
document.getElementById("form").addEventListener("submit", function (e) {
        e.preventDefault(); // Prevent the default form submission
        document.getElementById("message").textContent = "Submitting..";
        document.getElementById("message").style.display = "block";
        document.getElementById("bt").disabled = true;

        // Collect the form data
        var formData = new FormData(this);
        var keyValuePairs = [];
        for (var pair of formData.entries()) {
          keyValuePairs.push(pair[0] + "=val=" + pair[1]);
        }

        var formDataString = keyValuePairs.join("=namff=");

        // Send a POST request to your Google Apps Script
        fetch(
          "https://script.google.com/macros/s/AKfycbwfKdtfRPBb3IcCEoPM8n0AULppkGjme0AXKYu2WTkrszRCiuJBwezd790OaaKFGeUO/exec",
          {
            redirect: "follow",
            method: "POST",
            body: formDataString,
            headers: {
              "Content-Type": "text/plain;charset=utf-8",
            },
          }
        )
          .then(function (response) {
            // Check if the request was successful
            if (response) {
              return response; // Assuming your script returns JSON response
            } else {
              throw new Error("Failed to submit the form.");
            }
          })
          .then(async function (data) {
            const result1 = await data.json();
            console.log(result1.data2);
            if (result1.data2 == "accept"){
            // Display a success message
            document.getElementById("bt").disabled = false;
            document.getElementById("form").reset();
            window.location='submission.html';
            setTimeout(function () {
              document.getElementById("message").textContent = "";
              document.getElementById("message").style.display = "none";
            }, 2600);}
            else if (result1.data2 == "reject"){
              window.location='reject.html';
            }
          })
          .catch(function (error) {
            // Handle errors, you can display an error message here
            console.error(error);
            document.getElementById("message").textContent =
              "An error occurred while submitting the form.";
            document.getElementById("message").style.display = "block";
          });
      });
</script>
</section>
</body>
</html>
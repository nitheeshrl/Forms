<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="widthdevice-width, initial-scale=1">
    <link rel="icon" href="white.png" type="image/x-icon">
    <title>IAC Demo Site Feedback Collection</title>  
    <link rel="stylesheet" href="style.css" />
    <script>
      window.onload=getstatus();
       function getstatus(){
   const url = "https://script.google.com/macros/s/AKfycbxR9JjLW-_xKlNmW7-2OmoqYeHLkfZn45DJL-kazZ4Nl_gGqbUNwJk96DmvpyGzxAPp/exec" 
   var val = "IAC Demo Site Feedback Collection Form";
   console.log(val)
   fetch(`${url}?header=${val}`)
       .then((response) => response.json())
       .then(({ data }) => {
           if (data == "Live"){
   
               document.getElementById("frqa").style.display="initial";
               document.getElementById("ll").textContent="";
   
               }
               else if (data == "Inactive"){
                 document.getElementById("frqa").style.display="none";
                 window.location='end.html';
               }
       })
       .catch((error) => console.error('!!!!!!!!', error));
   }
   </script>
</head>    
<body>
<section class="header">
<div>
<img src="white_logo.png" alt="">
</div>
<div>
<h1>NIFTEM-T Placement Cell</h1>
</div>
</section>
<section >
<div class="form-container">
<script type="text/javascript">var submitted=false </script>
<iframe name="hiddenConfirm" id="hiddenConfirm" style="display: none;" onload="if(submitted){
    window.location='submission.html'; }"></iframe>
<form id="form" class="container m-4 pl-4" method="POST">
<h1 style="text-align: center;"> IAC Demo Site Feedback Collection </h1>
<h3 id="ll" style="text-align: center;">Form Loading....</h3>

<div id="frqa" class="frqa">
<div>
<a href="https://iacofficaldemo.pages.dev/" style="text-align: center; text-decoration: none; font-size: 14px; cursor: pointer;" > Click here to see the latest NIFTEM-T Placement Cell website</a>
</div>
<div class="form-element" style="margin-top: 20px;">
<span class="q">Name</span>
<input type="text" name="Name" required placeholder="Enter your name"/>
</div>
<div class="form-element">
<span class="q">Email address</span>
<input type="email" name="Email address"  required placeholder="Enter your email"/>
</div>
<div class="form-element">
<span class="q">Suggestions/Feedback for site development</span>
<input type="text" name="Suggestions/Feedback for site development" placeholder="Enter your suggestions/ feedback"/>
</div>
<div class="form-element">
<span class="q">Add Recruiters Feedbacks</span>
<input type="text" name="Add Recruiters Feedbacks" placeholder="Enter the feedback"/>
</div>
<div class="form-element">
<span class="q">Add Alumni quotes</span>
<input type="text" name="Add Alumni quotes" placeholder="Enter the quote"/>
</div>
<div class="form-element">
<span class="q">Add Internship Brochure</span>
<input id="i1" type="file" accept=".pdf,.doc.docx" name="file" />
<input id="fileurl1" type="hidden" name="Add Internship Brochure D.link" value=""/>
</div>
<div class="form-element">
<span class="q">Add Internship flyer</span>
<input  id="i2" type="file" accept="image/*" name="file"/>
<input id="fileurl2" type="hidden" name="Add Internship flyer D.link" value=""/>
<span class="fn1"></span>
</div>
<div class="form-element">
<span class="q">Add Placement flyer</span>
<input id="i3" type="file" accept="image/*" name="file"/>
<input id="fileurl3" type="hidden" name="Add Placement flyer D.link" value=""/>
</div>
<div class="form-element">
<span class="q">Add Top Recruiter Logo</span>
<input id="i4" type="file" accept="image/*" name="file"/>
<input id="fileurl4" type="hidden" name="Add Top Recruiter Logo D.link" value=""/>
</div>
<button style="cursor: pointer;" type="submit" id="bt"> 
Submit
</button> 
</form>

<div id="load" class="loader" > 
  
<img style="scale: 1.5;" src="loader.gif" alt="">
<div
      id="message"
    
      ></div>
    </div> 
</div>
</div>
<script>
let form = document.querySelector("form");
form.addEventListener('submit',()=>{ {
  document.getElementById("load").style.display="flex";
  document.getElementById("bt").style.display="none";
}})
var sendbtn = document.getElementById('bt');

 document.getElementById("form").addEventListener("submit", function (e) {
        e.preventDefault(); // Prevent the default form submission
        document.getElementById("message").textContent = "Submitting..";
        document.getElementById("message").style.display = "block";
        document.getElementById("bt").disabled = true;

        // Collect the form data
        var formData = new FormData(this);
        var keyValuePairs = [];
        for (var pair of formData.entries()) {
          keyValuePairs.push(pair[0] + "=val=" + pair[1]);
        }

        var formDataString = keyValuePairs.join("=namff=");
        console.log(formDataString)

        // Send a POST request to your Google Apps Script
        fetch(
          "https://script.google.com/macros/s/AKfycbw0-mk3ZMsiV01nI4Oj5_4GSKQw_duDzuT3l5zntibPc26BE07aNAp6eWpnW2K_xbhEaw/exec",
          {
            redirect: "follow",
            method: "POST",
            body: formDataString,
            headers: {
              "Content-Type": "text/plain;charset=utf-8",
            },
          }
        )
          .then(function (response) {
            // Check if the request was successful
            if (response) {
              return response; // Assuming your script returns JSON response
            } else {
              throw new Error("Failed to submit the form.");
            }
          })
          .then(function (data) {
            // Display a success message
            document.getElementById("bt").disabled = false;
            document.getElementById("form").reset();
            window.location='submission.html';


            setTimeout(function () {
              document.getElementById("message").textContent = "";
              document.getElementById("message").style.display = "none";
            }, 2600);
          })
          .catch(function (error) {
            // Handle errors, you can display an error message here
            console.error(error);
            document.getElementById("message").textContent =
              "An error occurred while submitting the form.";
            document.getElementById("message").style.display = "block";
});
});
</script>
<script src="script.js  "></script>
</section>
</body>
</html>
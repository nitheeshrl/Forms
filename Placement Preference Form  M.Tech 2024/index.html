<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="widthdevice-width, initial-scale=1">
    <link rel="icon" href="white_logo.png" type="image/x-icon">
    <title>Preference Form</title>  
    <link rel="stylesheet" href="style.css" />
    <script>
      window.onload=getstatus();
       function getstatus(){
   const url = "https://script.google.com/macros/s/AKfycbxR9JjLW-_xKlNmW7-2OmoqYeHLkfZn45DJL-kazZ4Nl_gGqbUNwJk96DmvpyGzxAPp/exec" 
   var val = "Placement Preference Form M.Tech 2024";
   console.log(val)
   fetch(`${url}?header=${val}`)
       .then((response) => response.json())
       .then(({ data }) => {
           if (data == "Live"){
   
               document.getElementById("frqa").style.display="initial";
               document.getElementById("ll").textContent="";
   
               }
               else if (data == "Inactive"){
                 document.getElementById("frqa").style.display="none";
                 window.location='end.html';
               }
       })
       .catch((error) => console.error('!!!!!!!!', error));
   }
   </script>
</head>    
<body>
<section class="header">
<div>
<img src="white_logo.png" alt="">
</div>
<div>
<h1>NIFTEM-T Placement Cell</h1>
</div>
</section>
<section >
<div class="form-container">
<script type="text/javascript">var submitted=false </script>
<form id="form" class="container m-4 pl-4" name="form" action="stepto2()" >
<h1 style="text-align: center;"> Placement Preference Form </h1>


<h3 id="ll" style="text-align: center;">Form Loading....</h3>
<div id="frqa" class="frqa">
  <section class="step1" id="step1">

  
<div class="form-element">
<span class="q">Name</span>
<select name="Name" id="Name" onchange="matchnameid()" required placeholder="Select your name">
<option value="">Select your name</option>
<option value='Bommi Durga Naga Sai Sri Sruthileena'>Bommi Durga Naga Sai Sri Sruthileena</option>
<option value='Damini H S'>Damini H S</option>
<option value='Gokul Raj R'>Gokul Raj R</option>
<option value='Midhuna Kurian'>Midhuna Kurian</option>
<option value='Parkhe Prajwal Anilkumar'>Parkhe Prajwal Anilkumar</option>
<option value='Praveena B'>Praveena B</option>
<option value='R B Ramyaa'>R B Ramyaa</option>
<option value='Sathishwaran S'>Sathishwaran S</option>
<option value='V R Bharathvaj'>V R Bharathvaj</option>
<option value='Vidhyadharan A'>Vidhyadharan A</option>
<option value='Yogesh M A'>Yogesh M A</option>
<option value='Anjali S'>Anjali S</option>
<option value='Anshida P K'>Anshida P K</option>
<option value='Hari Priya J'>Hari Priya J</option>
<option value='Harish S'>Harish S</option>
<option value='Hayanthika M S'>Hayanthika M S</option>
<option value='Irfana Z'>Irfana Z</option>
<option value='Jesi Feleciya P'>Jesi Feleciya P</option>
<option value='Kadimi Lakshmi Devi'>Kadimi Lakshmi Devi</option>
<option value='Karthick Ajay B'>Karthick Ajay B</option>
<option value='Kolli Venkata Naga Mallikarjuna Reddy'>Kolli Venkata Naga Mallikarjuna Reddy</option>
<option value='Subathra M'>Subathra M</option>
<option value='Nandana M'>Nandana M</option>
<option value='Shaliha A'>Shaliha A</option>
<option value='Sruti Chandra'>Sruti Chandra</option>
<option value='Sushmithasri R'>Sushmithasri R</option>
<option value='Abhijith K'>Abhijith K</option>
<option value='Atava Lokesh'>Atava Lokesh</option>
<option value='Ishwarya Lakshmi S'>Ishwarya Lakshmi S</option>
<option value='Joseph P J'>Joseph P J</option>
<option value='Mani Bharathi G'>Mani Bharathi G</option>
<option value='Manikandan T'>Manikandan T</option>
<option value='Mathangi G'>Mathangi G</option>
<option value='Mulukuri Naveena'>Mulukuri Naveena</option>
<option value='Rajasri C'>Rajasri C</option>
<option value='Shanmugapriya R'>Shanmugapriya R</option>
<option value='Sujithra M'>Sujithra M</option>
<option value='Trivedi Nidhi Deepak'>Trivedi Nidhi Deepak</option>
<option value='Muthumeena J'>Muthumeena J</option>
<option value='Srivigneswar S'>Srivigneswar S</option>
Sushmithasri R
</select>

</div>
<div class="form-element">
<span class="q">ID Number</span>
<input readonly type="text" name="ID Number" id="ID Number" required placeholder="Enter your ID number" />
</div>
<div class="form-element">
<span class="q">Degree</span>
<input readonly type="text" name="Degree" id="Degree" required placeholder="Enter your Degree" />
</div>
<div class="form-element">
<span class="q">Email address</span>
<input type="email" name="Email address" id="Email address" required placeholder="Enter your email"/>
</div>
<div class="form-element radio-buttons">
<span class="q">What is yourn future preference</span>
<label for="Placement through Institute">

<input
type="radio"
name="What is your future preference"
required 
id="Placement through Institute"
value="Placement through Institute"
/>
<span>Placement through Institute</span>
</label>
<label for="Higher Studies through Institute">

<input
type="radio"
name="What is your future preference"
id="Higher Studies through Institute"
value="Higher Studies through Institute"
/>
<span>Higher Studies through Institute</ span>
</label>
<label for="Entrepreneurship">

<input
type="radio"
name="What is your future preference"
id="Entrepreneurship"
value="Entrepreneurship"
/>
<span>Entrepreneurship</ span>
</label>
<label for="By yourself">

<input
type="radio"
name="What is your future preference"
id="By yourself"
value="By yourself"
/>
<span>By yourself</ span>
</label>
</div>
<div class="form-element">
<span class="q">Upload your photo</span>
<input required id="i2" type="file" accept="image/*" name="file" width="10" height="100"/>
<input id="fileurl2" type="hidden" name="Photo D.link" value=""/>
<span style="color: red; font-size: 12px;" class="q">Required photo size : 531 x 650 pixels</span>
<span class="fn1"></span>
</div>

<div style="font-size: 14px;">
<span>*This response will be considered final. Please make your choice wisely.</span><br>
<span >
  All individuals must follow the guidelines,<a style="background: none; color: blue;font-size: 14px;padding: 0px;" target="_blank" href="https://drive.google.com/file/d/1ZKBOEvVUB-Q2h5ukq5VfMpvZ9WjT2GC9/view?usp=share_link">rules, and regulations</a> issued by the Placement Cell. The same must be signed to proceed with internships or placements through the NIFTEM-T Placement Cell.</span>
</div> 
<button style="margin-top: 20px;"  type="button" id="bt1" onclick="stepto2()"> 
Proceed
</button> 


  </section>
  <section class="step2" id="step2">
    <h1 style="text-align: center;">Confirmation Details</h1><br>
    <div class="confirm_details">
    <span><b>Name : </b></span>  
    <span id="confirm_name"></span>
    </div><br>
    <div class="confirm_details">
    <span><b>ID Number : </b></span>  
    <span id="confirm_id"></span>
    </div><br>
    <div class="confirm_details">
    <span><b>Degree : </b></span>  
    <span id="confirm_degree"></span>
    </div><br>
    <div class="confirm_details">
    <span><b>Email Address : </b></span>  
    <span id="confirm_email"></span>
    </div><br>
    <div class="confirm_details">
    <span><b>Preference : </b></span>  
    <span id="confirm_choice"></span>
    </div><br>
    <div class="confirm_details">
    <span><b>Photo : </b></span>  

    <img id="confirmphoto" src="" alt="">
    </div><br>
  
   
    <label for="declaration">
      <input type="checkbox" required name="Declaration" value="Accepted">
      <span>I confirm that the details provided above are accurate and given with a clear mind. I guarantee that I will not make any further modifications.</span>
      
      </label>
      <label for="declaration"><br><br>
      <input type="checkbox" required name="Declaration for rules" value="Accepted">
      <span>I agree to the rules and regulations established by the NIFTEM-T Placement Cell. I understand that if I engage in any misconduct or disciplinary activities, the NIFTEM-T Placement Cell has the authority to take appropriate actions against me.</span>
      
      </label>
      <div style="display: flex; flex-direction: row;">
      </form>
    <button style="margin-top: 20px ;" type="button" id="bt2" onclick="stepto1()"> 
Back
</button> 
<button style="margin-top: 20px; margin-left: 20px;" type="submit" id="bt3"> 
Submit
</button> 
</div>

  </section>
  <section class="step3" id="step3">
    <h1 style="text-align: center;">Successfully Submitted</h1>
    <div style="margin-top: 50px;margin-bottom: 50px;">
  <span><b>Reference Number : </b></span>  
  <span id="ref"></span>
  </div>
    <span>The form and the rules and regulations can be downloaded from the links provided below. Please submit the signed hard copy, endorsed by both you and the placement coordinator, to the NIFTEM-T Placement Cell. </span><br><br>
    <div   id="dfiled" style="align-content:normal; margin-left: auto;margin-right: auto; margin-top: 30px;"><p style="text-align: left;">
      </p><span>Declaration Form</span><br><br>
   <a style="text-decoration: none; padding: 10px;margin-top: 50px;" id="Downloadfiledec" href="">Download Here</a></div> </p>
   <div   id="dfilep" style="align-content: normal; margin-left: auto;margin-right: auto; margin-top: 30px;display: none;"><p style="text-align: left;">
    <span>Placement Rules and Regulation</span><br><br>
 <a style="text-decoration: none; padding: 10px;margin-top: 50px;" id="Downloadfilep" href="">Download Here</a></div> </p>
 </p>
  </div><br>
    </section>
  
  </div> 
  <div id="load" class="load" > 
  <div class="loader" id="loader"> 

    </div> 
    <div
      id="message"
    class="message"
      ></div>
  </div> 
</div>
<script>

let form = document.querySelector("form");
form.addEventListener('submit',()=>{ {
  document.getElementById("load").style.display="initial";
  document.getElementById("loader").style.display="block"; 
  document.getElementById("bt3").style.display="none";
}})
document.getElementById("form").addEventListener("submit", function (e) {
        e.preventDefault(); // Prevent the default form submission
        document.getElementById("message").textContent = "Submitting..";
        document.getElementById("message").style.display = "block";
        document.getElementById("bt3").disabled = true;

        // Collect the form data
        var formData = new FormData(this);
        var keyValuePairs = [];
        for (var pair of formData.entries()) {
          if (pair[0] !== "file"){
    
          keyValuePairs.push(pair[0] + "=val=" + pair[1]);
        }}

        var formDataString = keyValuePairs.join("=namff=");
        
        console.log(formDataString);

        // Send a POST request to your Google Apps Script
        fetch(
          "https://script.google.com/macros/s/AKfycbwTmu3Mk-vPmGxPQCDustxO0ER3-gQT8PPsRW_eZJ-wDWx0yZ2mokuvOsO2rGO25HAz/exec",
          {
            redirect: "follow",
            method: "POST",
            body: formDataString,
            headers: {
              "Content-Type": "text/plain;charset=utf-8",
            },
          }
        )
          .then(function (response) {
            // Check if the request was successful
            if (response) {
              return response; // Assuming your script returns JSON response
            } else {
              throw new Error("Failed to submit the form.");
            }
          })
          .then(async function (data) {
            const result1 = await data.json();
            console.log(result1.data2);
            if (result1.data2[0] !== "reject"){
            // Display a success message
            console.log(result1.data2[0])
            console.log(result1.data2[1])
            document.getElementById("bt1").disabled = false;
            document.getElementById("form").reset();
            var links = result1.data2[0].split("=nam=");
            console.log(links);
            if (result1.data2[2] == "Placement"){
              document.getElementById("Downloadfiledec").href=links[0];
              document.getElementById("Downloadfilep").href=links[1];
              document.getElementById("dfilep").style.display="initial";
            }
            else{
              document.getElementById("Downloadfiledec").href=links[0];

            }
            
            document.getElementById("ref").textContent = result1.data2[1];
            document.getElementById("step1").style.display="none";
            document.getElementById("step2").style.display="none";
            document.getElementById("step3").style.display="initial";
            document.getElementById("load").style.display="none";
            setTimeout(function () {
              document.getElementById("message").textContent = "";
              document.getElementById("message").style.display = "none";
            }, 2600);}
            else if (result1.data2[0] == "reject"){
              window.location='reject.html';
            }
          })
          .catch(function (error) {
            // Handle errors, you can display an error message here
            console.error(error);
            document.getElementById("message").textContent =
              "An error occurred while submitting the form.";
            document.getElementById("message").style.display = "block";
          });
      });
</script>
<script>
  step1 = document.getElementById("step1");
  step2 = document.getElementById("step2");
  step3 = document.getElementById("step3");
bt1 = document.getElementById("bt1");
bt2 = document.getElementById("bt2");
bt3 = document.getElementById("bt3");

confirmname = document.getElementById("confirm_name");
confirmid = document.getElementById("confirm_id");
confirmemail = document.getElementById("confirm_email");
confirmchoice = document.getElementById("confirm_choice");
confirmdegree = document.getElementById("confirm_degree");


function stepto2() {
  let conchoice = "";
  let name = document.getElementById('Name').value
  let id = document.getElementById('ID Number').value
  let degree = document.getElementById('Degree').value
  let email = document.getElementById('Email address').value
  let choice = document.getElementsByName('What is your future preference')
  let photo = document.getElementById('i2').value
  let uphoto = document.getElementById('fileurl2').value

  for (i=0;i<choice.length;i++){
  if (choice[i].checked){
    confirmchoice.textContent=choice[i].value;
    conchoice=choice[i].value;

  }
}
  if(name == ""){
    alert("Select the name");
  }
  else if(id == ""){
    alert("Enter the ID Number");
  }
  else if(email == ""){
    alert("Enter the email address");
  }
  else if(conchoice == ""){
    alert("Select the preference");
  }
  else if(photo == ""){
    alert("Upload the photo");
  }
  else if(uphoto == ""){
    alert("Upload the correct photo");
  }

  else{
  
step1.style.display="none";
step2.style.display="initial"
bt1.style.display="none";
bt2.style.display="initial";
bt3.style.display="initial";
console.log(name);
console.log(id);
console.log(confirmchoice.value);
console.log(photo);

confirmname.textContent=document.form.Name.value;
confirmid.textContent=id;
confirmdegree.textContent=degree;
confirmemail.textContent=email;
for (i=0;i<choice.length;i++){
  if (choice[i].checked){
    confirmchoice.textContent=choice[i].value;
  }
}
}



      
      function previewSelectedImage(i,o) {
        const imageInput = document.getElementById(i);
        const previewImage = document.getElementById(o);
         const file = imageInput.files[0];
         if (file) {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = function(e) {
               previewImage.src = e.target.result;
            }
         }
      }
      document.getElementById('i2').addEventListener('change', previewSelectedImage('i2','confirmphoto'));

}
function stepto1() {
step1.style.display="initial";
step2.style.display="none";
bt1.style.display="initial";
bt2.style.display="none";
bt3.style.display="none";
}



function matchnameid(){
  let id = document.getElementById('ID Number');
  let degree = document.getElementById('Degree');
  let name = document.getElementById('Name').value;
  var names =['Bommi Durga Naga Sai Sri Sruthileena',
'Damini H S',
'Gokul Raj R',
'Midhuna Kurian',
'Parkhe Prajwal Anilkumar',
'Praveena B',
'R B Ramyaa',
'Sathishwaran S',
'V R Bharathvaj',
'Vidhyadharan A',
'Yogesh M A',
'Anjali S',
'Anshida P K',
'Hari Priya J',
'Harish S',
'Hayanthika M S',
'Irfana Z',
'Jesi Feleciya P',
'Kadimi Lakshmi Devi',
'Karthick Ajay B',
'Kolli Venkata Naga Mallikarjuna Reddy',
'Subathra M',
'Nandana M', 
'Shaliha A', 
'Sruti Chandra', 
'Sushmithasri R', 
'Abhijith K',
'Atava Lokesh',
'Ishwarya Lakshmi S',
'Joseph P J',
'Mani Bharathi G',
'Manikandan T',
'Mathangi G',
'Mulukuri Naveena',
'Rajasri C',
'Shanmugapriya R',
'Sujithra M',
'Trivedi Nidhi Deepak',
'Muthumeena J', 
'Srivigneswar S' ]
var ids = ['2023P1001',
'2023P1002',
'2023P1003',
'2023P1004',
'2023P1005',
'2023P1006',
'2023P1007',
'2023P1008',
'2023P1010',
'2023P1011',
'2023P1012',
'2023P2001',
'2023P2002',
'2023P2004',
'2023P2005',
'2023P2006',
'2023P2007',
'2023P2008',
'2023P2009',
'2023P2010',
'2023P2011',
'2023P2015',
'2023P2012',
'2023P2013',
'2023P2014',
'2023P2016',
'2023P3001',
'2023P3002',
'2023P3004',
'2023P3005',
'2023P3006',
'2023P3007',
'2023P3008',
'2023P3009',
'2023P3012',
'2023P3013',
'2023P3015',
'2023P3016',

'2023P3010',
'2023P3014'
]
var degrees = [
"M.Tech - Food Process Engnieering",
"M.Tech - Food Process Engnieering",
"M.Tech - Food Process Engnieering",
"M.Tech - Food Process Engnieering",
"M.Tech - Food Process Engnieering",
"M.Tech - Food Process Engnieering",
"M.Tech - Food Process Engnieering",
"M.Tech - Food Process Engnieering",
"M.Tech - Food Process Engnieering",
"M.Tech - Food Process Engnieering",
"M.Tech - Food Process Engnieering",
"M.Tech - Food Process Technology",
"M.Tech - Food Process Technology",
"M.Tech - Food Process Technology",
"M.Tech - Food Process Technology",
"M.Tech - Food Process Technology",
"M.Tech - Food Process Technology",
"M.Tech - Food Process Technology",
"M.Tech - Food Process Technology",
"M.Tech - Food Process Technology",
"M.Tech - Food Process Technology",
"M.Tech - Food Process Technology",
"M.Tech - Food Process Technology",
"M.Tech - Food Process Technology",
"M.Tech - Food Process Technology",
"M.Tech - Food Process Technology",
"M.Tech - Food Safety and Quality Assurance",
"M.Tech - Food Safety and Quality Assurance",
"M.Tech - Food Safety and Quality Assurance",
"M.Tech - Food Safety and Quality Assurance",
"M.Tech - Food Safety and Quality Assurance",
"M.Tech - Food Safety and Quality Assurance",
"M.Tech - Food Safety and Quality Assurance",
"M.Tech - Food Safety and Quality Assurance",
"M.Tech - Food Safety and Quality Assurance",
"M.Tech - Food Safety and Quality Assurance",
"M.Tech - Food Safety and Quality Assurance",
"M.Tech - Food Safety and Quality Assurance",
"M.Tech - Food Safety and Quality Assurance",
"M.Tech - Food Safety and Quality Assurance"
]
for (var i = 0; i < names.length; i++) {
  
if (name == names[i]){
id.value = ids[i];
id.placeholder = ids[i];
degree.value = degrees[i];
degree.placeholder = degrees[i];
}
}
}
  </script>
  <script src="script.js"></script>
</section>
</body>
</html>